# Тестовое задание Smartway

Сервис представляет собой REST API, который предоставляет следующие функции:

1.  Добавление сотрудников
2.  Удаление сотрудников по id
3.  Вывод списка сотрудников для указанной компании
4.  Вывод списка сотрудников для указанного отдела компании
5.  Изменение сотрудника по его ID. изменяться должны только те поля, которые указаны в запросе



## Чтобы запустить приложение нужно:
1. Клонировать репозиторий:
```
    git clone https://github.com/Nikita-Mihailuk/smartwayTestTask.git
```

2. Запустить через Docker:
```
    docker compose up --build
```
Тогда нужно сделать .env файл(есть пример .env.example)

Или запустить из консоли:
```
    task run
    
    или
    
    go run cmd/employee_service/main.go --config={{.CONFIG_PATH}}
```

В обоих случаях можно указать путь к конфигу или запусить также через переменные окружения

Перед запуском из консоли нужно выполнить миграции БД:
```
    task migrate-up
    
    или
    
    go run ./cmd/migrator --migrations-path={{.MIGRATIONS_PATH}} --migrations-table={{.MIGRATIONS_TABLE}} --db-url={{.DB_URL}}
```


## Доступные endpoint:

| Метод | Путь                                                                 | Описание                          |
|-------|----------------------------------------------------------------------|-----------------------------------|
| POST  | `/api/v1/employees`                                                 | Создать сотрудника                |
| GET   | `/api/v1/employees/company/:companyID`                              | Получить сотрудников компании     |
| GET   | `/api/v1/employees/company/:companyID/department/:departmentID`     | Получить сотрудников по отделу    |
| PATCH | `/api/v1/employees/:id`                                             | Обновить данные сотрудника        |
| DELETE| `/api/v1/employees/:id`                                             | Удалить сотрудника                |

Более подробно ознакомится с ними можно в swagger документации, которая по умолчанию доступна на http://127.0.0.1:8080/swagger/
